<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corpo Padel - Documentation Projet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        /* NAVBAR */
        .navbar {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
        }

        .navbar-brand {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .navbar-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .navbar-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: 500;
        }

        .navbar-link:hover,
        .navbar-link.active {
            background: rgba(255,255,255,0.2);
        }

        /* CONTENT */
        .content {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .page {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CAHIER DES CHARGES STYLES */
        .cdc h1 {
            color: #1e40af;
            font-size: 2.5rem;
            border-bottom: 3px solid #1e40af;
            padding-bottom: 0.5rem;
            margin: 2rem 0 1rem 0;
        }

        .cdc h2 {
            color: #3b82f6;
            font-size: 1.8rem;
            margin: 1.5rem 0 1rem 0;
            border-left: 5px solid #3b82f6;
            padding-left: 1rem;
        }

        .cdc h3 {
            color: #475569;
            font-size: 1.3rem;
            margin: 1rem 0 0.5rem 0;
        }

        .cdc table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .cdc th {
            background-color: #1e40af;
            color: white;
            padding: 0.8rem;
            text-align: left;
        }

        .cdc td {
            border: 1px solid #e2e8f0;
            padding: 0.6rem;
        }

        .cdc tr:nth-child(even) {
            background-color: #f8fafc;
        }

        .cdc .info-box {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .cdc .warning-box {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .cdc .danger-box {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .cdc pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.85rem;
        }

        .cdc code {
            background-color: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .cdc ul, .cdc ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        .cdc li {
            margin: 0.5rem 0;
        }

        /* STARTER KIT STYLES */
        .starter-kit h1 {
            color: #1e40af;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .starter-kit h2 {
            color: #3b82f6;
            font-size: 1.8rem;
            margin: 2rem 0 1rem 0;
        }

        .starter-kit h3 {
            color: #475569;
            font-size: 1.3rem;
            margin: 1.5rem 0 0.5rem 0;
        }

        .starter-kit pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9rem;
            margin: 1rem 0;
        }

        .starter-kit code {
            background-color: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .starter-kit ul {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        .starter-kit li {
            margin: 0.5rem 0;
        }

        .starter-kit .badge {
            background-color: #10b981;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        /* HERO SECTION */
        .hero {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .hero-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .navbar-content {
                flex-direction: column;
                gap: 1rem;
            }

            .navbar-menu {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .page {
                padding: 1rem;
            }

            .cdc h1 {
                font-size: 1.8rem;
            }

            .cdc h2 {
                font-size: 1.4rem;
            }
        }

        /* FOOTER */
        .footer {
            background: #1e293b;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer a {
            color: #3b82f6;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="navbar-content">
            <div class="navbar-brand">
                <span>ğŸ¾</span>
                <span>Corpo Padel</span>
            </div>
            <ul class="navbar-menu">
                <li><a href="#" class="navbar-link active" data-page="home">Accueil</a></li>
                <li><a href="#" class="navbar-link" data-page="cahier">Cahier des charges</a></li>
                <li><a href="#" class="navbar-link" data-page="starter">Starter Kit</a></li>
            </ul>
        </div>
    </nav>

    <!-- CONTENT -->
    <div class="content">
        <!-- HOME PAGE -->
        <div id="home" class="page active">
            <div class="hero">
                <div class="hero-icon">ğŸ¾</div>
                <h1>Projet Corpo Padel</h1>
                <p>Documentation complÃ¨te pour votre projet pÃ©dagogique</p>
                <p style="font-size: 1rem; margin-top: 1rem;">Cours de Test et SÃ©curitÃ© - Formation IngÃ©nieur</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin: 2rem 0;">
                <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h2 style="color: #1e40af; margin-bottom: 1rem;">ğŸ“„ Cahier des charges</h2>
                    <p>Document complet de 45+ pages avec toutes les spÃ©cifications fonctionnelles, techniques et de sÃ©curitÃ©.</p>
                    <ul style="margin: 1rem 0;">
                        <li>SpÃ©cifications fonctionnelles dÃ©taillÃ©es</li>
                        <li>Architecture technique complÃ¨te</li>
                        <li>Exigences de sÃ©curitÃ©</li>
                        <li>Guide des tests</li>
                        <li>CritÃ¨res d'Ã©valuation</li>
                    </ul>
                    <a href="#" onclick="navigateTo('cahier'); return false;" style="display: inline-block; background: #1e40af; color: white; padding: 0.8rem 1.5rem; border-radius: 5px; text-decoration: none; margin-top: 1rem;">Consulter â†’</a>
                </div>

                <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h2 style="color: #1e40af; margin-bottom: 1rem;">ğŸ’» Starter Kit</h2>
                    <p>Kit de dÃ©marrage prÃªt Ã  l'emploi avec backend FastAPI et frontend VueJS configurÃ©s.</p>
                    <ul style="margin: 1rem 0;">
                        <li>Authentification JWT fonctionnelle</li>
                        <li>Anti-brute force implÃ©mentÃ©</li>
                        <li>Structure complÃ¨te backend/frontend</li>
                        <li>Tests unitaires et E2E</li>
                        <li>README multi-OS</li>
                    </ul>
                    <a href="#" onclick="navigateTo('starter'); return false;" style="display: inline-block; background: #1e40af; color: white; padding: 0.8rem 1.5rem; border-radius: 5px; text-decoration: none; margin-top: 1rem;">Consulter â†’</a>
                </div>
            </div>

            <div style="background: #eff6ff; padding: 2rem; border-radius: 10px; margin: 2rem 0; border-left: 5px solid #3b82f6;">
                <h3 style="color: #1e40af; margin-bottom: 1rem;">ğŸ¯ Informations pratiques</h3>
                <p><strong>DurÃ©e du projet :</strong> 12 heures (dÃ©veloppement + tests + rapport)</p>
                <p><strong>Stack imposÃ©e :</strong> VueJS 3 + FastAPI + SQLite</p>
                <p><strong>Repository GitHub :</strong> <a href="https://github.com/AndreyPividori/PolytechTours-PadelStarterKit" target="_blank" style="color: #1e40af;">https://github.com/AndreyPividori/PolytechTours-PadelStarterKit</a></p>
                <p><strong>Compte de test :</strong> admin@padel.com / Admin@2025!</p>
            </div>
        </div>

        <!-- CAHIER DES CHARGES PAGE -->
        <div id="cahier" class="page cdc">
            <h1>ğŸ“„ Cahier des Charges - Application Corpo Padel</h1>
            
            <div class="cover">
    <h1>CAHIER DES CHARGES</h1>
    <h2>Application de Gestion de Tournois<br>Corpo Padel</h2>
    
    <div style="margin: 80px 0;">
        <svg width="200" height="200" viewBox="0 0 200 200" style="display: inline-block;">
            <circle cx="100" cy="100" r="80" fill="none" stroke="#1e40af" stroke-width="4"/>
            <circle cx="100" cy="100" r="60" fill="none" stroke="#3b82f6" stroke-width="3"/>
            <rect x="60" y="85" width="80" height="30" fill="#1e40af" rx="5"/>
            <circle cx="75" cy="60" r="8" fill="#f59e0b"/>
            <circle cx="125" cy="60" r="8" fill="#f59e0b"/>
        </svg>
    </div>
    
    <div class="metadata">
        <p><strong>Projet PÃ©dagogique</strong></p>
        <p>Cours de Test et SÃ©curitÃ© - Formation IngÃ©nieur</p>
        <p>DurÃ©e : 12 heures</p>
        <p>Version 1.0 - Octobre 2025</p>
    </div>
</div>

<!-- TABLE DES MATIÃˆRES -->
<div class="toc">
    <h1>Table des MatiÃ¨res</h1>
    
    <ul>
        <li class="level1">1. Introduction</li>
        <li class="level2">1.1 Contexte du projet</li>
        <li class="level2">1.2 Objectifs pÃ©dagogiques</li>
        <li class="level2">1.3 Glossaire</li>
        
        <li class="level1">2. SpÃ©cifications Fonctionnelles</li>
        <li class="level2">2.1 Gestion des rÃ´les et authentification</li>
        <li class="level2">2.2 Page d'accueil</li>
        <li class="level2">2.3 Planning</li>
        <li class="level2">2.4 Matchs</li>
        <li class="level2">2.5 RÃ©sultats</li>
        <li class="level2">2.6 Administration</li>
        <li class="level2">2.7 Profil</li>
        
        <li class="level1">3. SpÃ©cifications Techniques</li>
        <li class="level2">3.1 Architecture systÃ¨me</li>
        <li class="level2">3.2 Stack technologique</li>
        <li class="level2">3.3 ModÃ¨le de donnÃ©es</li>
        <li class="level2">3.4 API REST</li>
        <li class="level2">3.5 Formats et contraintes</li>
        
        <li class="level1">4. Exigences de SÃ©curitÃ©</li>
        <li class="level2">4.1 Authentification et autorisation</li>
        <li class="level2">4.2 Protection contre les attaques</li>
        <li class="level2">4.3 Validation des donnÃ©es</li>
        <li class="level2">4.4 Gestion des mots de passe</li>
        
        <li class="level1">5. SpÃ©cifications des Tests</li>
        <li class="level2">5.1 Tests unitaires</li>
        <li class="level2">5.2 Tests End-to-End</li>
        <li class="level2">5.3 Tests de sÃ©curitÃ© OWASP</li>
        
        <li class="level1">6. Livrables et Ã‰valuation</li>
        <li class="level2">6.1 Livrables attendus</li>
        <li class="level2">6.2 CritÃ¨res d'Ã©valuation</li>
        
        <li class="level1">7. Annexes</li>
    </ul>
</div>

<!-- CONTENU -->
<h1>1. Introduction</h1>

<h2>1.1 Contexte du projet</h2>

<p>Ce projet pÃ©dagogique s'inscrit dans le cadre d'un cours de test et sÃ©curitÃ© pour Ã©tudiants ingÃ©nieurs. L'objectif est de dÃ©velopper une application web complÃ¨te pour gÃ©rer les tournois de padel corporatifs d'une entreprise.</p>

<div class="info-box">
    <strong>DurÃ©e totale :</strong> 12 heures (dÃ©veloppement + tests + rapport)<br>
    <strong>Travail :</strong> En binÃ´me ou trinÃ´me<br>
    <strong>ModalitÃ© :</strong> Projet notÃ© avec rendu de code et rapport
</div>

<p>L'application doit permettre aux administrateurs de gÃ©rer l'ensemble des tournois (planification, Ã©quipes, rÃ©sultats) et aux joueurs de suivre leur progression et leurs prochains matchs.</p>

<h2>1.2 Objectifs pÃ©dagogiques</h2>

<p>Ce projet vous permettra de mettre en pratique les compÃ©tences suivantes :</p>

<ul>
    <li><strong>DÃ©veloppement Full-Stack :</strong> CrÃ©er une application complÃ¨te avec frontend VueJS et backend FastAPI</li>
    <li><strong>Tests automatisÃ©s :</strong> ImplÃ©menter des tests unitaires (Python) et End-to-End (Cypress)</li>
    <li><strong>SÃ©curitÃ© applicative :</strong> Mettre en Å“uvre les bonnes pratiques de sÃ©curitÃ© (validation, XSS, authentification)</li>
    <li><strong>Gestion de base de donnÃ©es :</strong> Concevoir et manipuler un schÃ©ma de donnÃ©es cohÃ©rent</li>
    <li><strong>Documentation :</strong> RÃ©diger un rapport technique complet</li>
</ul>

<h2>1.3 Glossaire</h2>

<table>
    <tr>
        <th>Terme</th>
        <th>DÃ©finition</th>
    </tr>
    <tr>
        <td><strong>Padel</strong></td>
        <td>Sport de raquette combinant des Ã©lÃ©ments du tennis et du squash, jouÃ© en double sur un court fermÃ©</td>
    </tr>
    <tr>
        <td><strong>Corpo</strong></td>
        <td>AbrÃ©viation de "corporatif", dÃ©signe un tournoi inter-entreprises</td>
    </tr>
    <tr>
        <td><strong>Poule</strong></td>
        <td>Groupe de 6 Ã©quipes qui s'affrontent dans un systÃ¨me de championnat</td>
    </tr>
    <tr>
        <td><strong>Ã‰quipe</strong></td>
        <td>BinÃ´me de joueurs reprÃ©sentant une entreprise</td>
    </tr>
    <tr>
        <td><strong>Ã‰vÃ©nement</strong></td>
        <td>CrÃ©neau de jeu regroupant 1 Ã  3 matchs Ã  une date et heure donnÃ©es</td>
    </tr>
    <tr>
        <td><strong>Piste</strong></td>
        <td>Terrain de padel identifiÃ© par un numÃ©ro</td>
    </tr>
    <tr>
        <td><strong>Saison</strong></td>
        <td>PÃ©riode annuelle d'un tournoi (du 1er septembre au 31 aoÃ»t)</td>
    </tr>
    <tr>
        <td><strong>Licence</strong></td>
        <td>NumÃ©ro d'identification unique d'un joueur (format : LXXXXXX oÃ¹ X est un chiffre)</td>
    </tr>
</table>

<h1>2. SpÃ©cifications Fonctionnelles</h1>

<h2>2.1 Gestion des rÃ´les et authentification</h2>

<h3>2.1.1 Les trois rÃ´les</h3>

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Description</th>
        <th>AccÃ¨s</th>
    </tr>
    <tr>
        <td><strong>Visiteur</strong></td>
        <td>Utilisateur non authentifiÃ©</td>
        <td>Page d'accueil uniquement</td>
    </tr>
    <tr>
        <td><strong>Joueur</strong></td>
        <td>Joueur inscrit dans au moins une Ã©quipe</td>
        <td>Toutes les pages sauf Administration</td>
    </tr>
    <tr>
        <td><strong>Administrateur</strong></td>
        <td>BÃ©nÃ©vole gestionnaire du tournoi</td>
        <td>Toutes les pages avec droits d'Ã©dition</td>
    </tr>
</table>

<h3>2.1.2 Processus d'authentification</h3>

<div class="info-box">
    <strong>MÃ©thode :</strong> JWT (JSON Web Token)<br>
    <strong>DurÃ©e de validitÃ© du token :</strong> 24 heures<br>
    <strong>Stockage :</strong> localStorage cÃ´tÃ© client
</div>

<p><strong>Flux d'authentification :</strong></p>
<ol>
    <li>L'utilisateur saisit son email et mot de passe</li>
    <li>Le backend vÃ©rifie les credentials</li>
    <li>Si valides, un JWT est gÃ©nÃ©rÃ© contenant : user_id, email, role, exp</li>
    <li>Le token est retournÃ© au client et stockÃ©</li>
    <li>Chaque requÃªte ultÃ©rieure inclut le token dans le header Authorization</li>
</ol>

<h3>2.1.3 MÃ©canisme anti-brute force</h3>

<div class="danger-box">
    <strong>OBLIGATOIRE :</strong> ImplÃ©mentation d'une protection contre les attaques par force brute
</div>

<p><strong>RÃ¨gles :</strong></p>
<ul>
    <li>Maximum 5 tentatives de connexion Ã©chouÃ©es</li>
    <li>Blocage du compte pendant 30 minutes aprÃ¨s 5 Ã©checs</li>
    <li>Le compteur se rÃ©initialise aprÃ¨s une connexion rÃ©ussie</li>
    <li>L'utilisateur doit recevoir un message clair indiquant le nombre de tentatives restantes</li>
    <li>AprÃ¨s blocage, afficher le temps restant avant dÃ©blocage</li>
</ul>

<p><strong>ImplÃ©mentation technique :</strong></p>
<pre>
Table: login_attempts
- email (TEXT)
- attempts_count (INTEGER)
- last_attempt (DATETIME)
- locked_until (DATETIME nullable)
</pre>

<h2>2.2 Page d'accueil</h2>

<h3>2.2.1 Objectif</h3>
<p>Page d'atterrissage simple et accueillante prÃ©sentant l'application.</p>

<h3>2.2.2 Contenu</h3>
<ul>
    <li>Une image ou banniÃ¨re Ã©voquant le padel corporatif</li>
    <li>Un message de bienvenue expliquant briÃ¨vement l'application</li>
    <li>Un bouton "Se connecter" bien visible</li>
</ul>

<h3>2.2.3 Comportement</h3>

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Affichage</th>
    </tr>
    <tr>
        <td>Visiteur</td>
        <td>Message de bienvenue + Bouton "Se connecter"</td>
    </tr>
    <tr>
        <td>Joueur / Admin</td>
        <td>Message personnalisÃ© "Bienvenue [PrÃ©nom]" + AccÃ¨s au menu complet</td>
    </tr>
</table>

<h2>2.3 Planning</h2>

<h3>2.3.1 Objectif</h3>
<p>Visualiser tous les Ã©vÃ©nements de la saison sous forme de calendrier.</p>

<h3>2.3.2 Vue calendrier</h3>

<p><strong>Affichage :</strong></p>
<ul>
    <li>Vue mensuelle par dÃ©faut</li>
    <li>PossibilitÃ© de naviguer entre les mois</li>
    <li>Chaque jour contenant un Ã©vÃ©nement est marquÃ© visuellement</li>
    <li>Clic sur un jour affiche les Ã©vÃ©nements de cette date</li>
</ul>

<h3>2.3.3 Structure d'un Ã©vÃ©nement</h3>

<div class="info-box">
<strong>Ã‰vÃ©nement :</strong> CrÃ©neau de jeu contenant 1 Ã  3 matchs
</div>

<table>
    <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Format</th>
        <th>Obligatoire</th>
    </tr>
    <tr>
        <td>Date</td>
        <td>DATE</td>
        <td>YYYY-MM-DD</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Heure</td>
        <td>TIME</td>
        <td>HH:MM (24h)</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Matchs</td>
        <td>Liste</td>
        <td>1 Ã  3 matchs</td>
        <td>Oui (min 1)</td>
    </tr>
</table>

<h3>2.3.4 Structure d'un match</h3>

<table>
    <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Format</th>
        <th>Obligatoire</th>
    </tr>
    <tr>
        <td>NumÃ©ro de piste</td>
        <td>INTEGER</td>
        <td>1-10</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Ã‰quipe 1</td>
        <td>RÃ©fÃ©rence</td>
        <td>ID Ã©quipe</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Ã‰quipe 2</td>
        <td>RÃ©fÃ©rence</td>
        <td>ID Ã©quipe</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Statut</td>
        <td>ENUM</td>
        <td>A_VENIR, TERMINE, ANNULE</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Score Ã©quipe 1</td>
        <td>TEXT</td>
        <td>Ex: "6-4, 6-3"</td>
        <td>Non</td>
    </tr>
    <tr>
        <td>Score Ã©quipe 2</td>
        <td>TEXT</td>
        <td>Ex: "4-6, 3-6"</td>
        <td>Non</td>
    </tr>
</table>

<h3>2.3.5 Droits par rÃ´le</h3>

<h4>Joueur</h4>
<ul>
    <li>Voir le calendrier complet</li>
    <li>Cliquer sur un Ã©vÃ©nement pour voir les dÃ©tails (date, heure, matchs)</li>
    <li>Voir uniquement les Ã©vÃ©nements oÃ¹ ils sont impliquÃ©s (filtre automatique)</li>
    <li>Option pour voir tous les Ã©vÃ©nements (dÃ©cocher le filtre)</li>
</ul>

<h4>Administrateur</h4>
<ul>
    <li>Toutes les actions du joueur</li>
    <li>Ajouter un Ã©vÃ©nement (formulaire avec date, heure, sÃ©lection des matchs)</li>
    <li>Modifier un Ã©vÃ©nement existant</li>
    <li>Supprimer un Ã©vÃ©nement</li>
</ul>

<div class="warning-box">
<strong>RÃ¨gle mÃ©tier :</strong> Un Ã©vÃ©nement ne peut Ãªtre supprimÃ© que s'il n'a pas encore eu lieu (statut A_VENIR)
</div>

<h3>2.3.6 Formulaire d'ajout d'Ã©vÃ©nement (Admin)</h3>

<p><strong>Champs :</strong></p>
<ul>
    <li>Date (obligatoire, datepicker, min: aujourd'hui)</li>
    <li>Heure (obligatoire, format HH:MM)</li>
    <li>Nombre de matchs (1, 2 ou 3)</li>
    <li>Pour chaque match :
        <ul>
            <li>NumÃ©ro de piste (select 1-10)</li>
            <li>Ã‰quipe 1 (select parmi les Ã©quipes)</li>
            <li>Ã‰quipe 2 (select parmi les Ã©quipes)</li>
        </ul>
    </li>
</ul>

<p><strong>Validations :</strong></p>
<ul>
    <li>La date doit Ãªtre >= date du jour</li>
    <li>L'heure doit Ãªtre au format HH:MM (00:00 Ã  23:59)</li>
    <li>Deux matchs ne peuvent pas utiliser la mÃªme piste pour le mÃªme Ã©vÃ©nement</li>
    <li>Une Ã©quipe ne peut jouer qu'un seul match par Ã©vÃ©nement</li>
</ul>

<h2>2.4 Matchs</h2>

<h3>2.4.1 Objectif</h3>
<p>Afficher la liste des matchs Ã  venir dans les 30 prochains jours sous forme de liste.</p>

<h3>2.4.2 Affichage par dÃ©faut</h3>

<table>
    <tr>
        <th>Information</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Date et heure</td>
        <td>Format : "Lundi 15 janvier 2025 Ã  19:30"</td>
    </tr>
    <tr>
        <td>Piste</td>
        <td>NumÃ©ro de piste</td>
    </tr>
    <tr>
        <td>Ã‰quipes</td>
        <td>Nom entreprise Ã©quipe 1 vs Nom entreprise Ã©quipe 2</td>
    </tr>
    <tr>
        <td>Joueurs</td>
        <td>PrÃ©nom Nom de chaque joueur des 2 Ã©quipes</td>
    </tr>
    <tr>
        <td>Statut</td>
        <td>Badge colorÃ© : Ã€ venir (bleu), AnnulÃ© (rouge)</td>
    </tr>
</table>

<h3>2.4.3 Filtre</h3>

<h4>Pour les joueurs</h4>
<ul>
    <li><strong>Par dÃ©faut :</strong> Affiche uniquement les matchs de leur(s) Ã©quipe(s)</li>
    <li><strong>Option :</strong> Case Ã  cocher "Voir tous les matchs" pour dÃ©sactiver le filtre</li>
</ul>

<h4>Pour les administrateurs</h4>
<ul>
    <li><strong>Par dÃ©faut :</strong> Affiche tous les matchs</li>
    <li><strong>Options de filtre :</strong>
        <ul>
            <li>Par entreprise</li>
            <li>Par poule</li>
            <li>Par statut</li>
        </ul>
    </li>
</ul>

<h3>2.4.4 Actions administrateur</h3>

<h4>Ajouter un match</h4>
<p>Formulaire avec les champs suivants :</p>
<ul>
    <li>Date (YYYY-MM-DD, >= aujourd'hui)</li>
    <li>Heure (HH:MM)</li>
    <li>Piste (1-10)</li>
    <li>Ã‰quipe 1 (select)</li>
    <li>Ã‰quipe 2 (select)</li>
</ul>

<div class="warning-box">
<strong>Validation :</strong> VÃ©rifier qu'aucun autre match n'utilise la mÃªme piste au mÃªme crÃ©neau (date + heure)
</div>

<h4>Modifier un match</h4>
<ul>
    <li>Modifier la date/heure (si statut = A_VENIR)</li>
    <li>Changer la piste</li>
    <li>Modifier le statut (A_VENIR â†’ ANNULE)</li>
    <li>Saisir les scores (si match terminÃ©)</li>
</ul>

<h4>Supprimer un match</h4>
<ul>
    <li>Possible uniquement si statut = A_VENIR</li>
    <li>Confirmation obligatoire</li>
</ul>

<h2>2.5 RÃ©sultats</h2>

<h3>2.5.1 Objectif</h3>
<p>Consulter les rÃ©sultats des matchs terminÃ©s et le classement gÃ©nÃ©ral.</p>

<h3>2.5.2 Vue des rÃ©sultats personnels (Joueur)</h3>

<p><strong>Affichage :</strong></p>
<ul>
    <li>Liste chronologique (du plus rÃ©cent au plus ancien)</li>
    <li>Uniquement les matchs avec statut = TERMINE</li>
    <li>Filtre : "Depuis le dÃ©but de la saison" par dÃ©faut</li>
</ul>

<p><strong>Informations par match :</strong></p>
<table>
    <tr>
        <th>Champ</th>
        <th>Format</th>
    </tr>
    <tr>
        <td>Date</td>
        <td>DD/MM/YYYY</td>
    </tr>
    <tr>
        <td>Adversaires</td>
        <td>PrÃ©nom Nom (Entreprise)</td>
    </tr>
    <tr>
        <td>Score</td>
        <td>6-4, 6-3 (victoire en vert, dÃ©faite en rouge)</td>
    </tr>
    <tr>
        <td>Piste</td>
        <td>NumÃ©ro</td>
    </tr>
</table>

<h3>2.5.3 Classement gÃ©nÃ©ral des entreprises</h3>

<div class="info-box">
<strong>SystÃ¨me de points :</strong><br>
- Victoire : 3 points<br>
- DÃ©faite : 0 point<br>
- Match annulÃ© : ne compte pas
</div>

<p><strong>RÃ¨gles de classement :</strong></p>
<ol>
    <li>Total de points</li>
    <li>En cas d'Ã©galitÃ© : nombre de victoires</li>
    <li>En cas d'Ã©galitÃ© : diffÃ©rence de sets gagnÃ©s/perdus</li>
    <li>En cas d'Ã©galitÃ© : ordre alphabÃ©tique</li>
</ol>

<table>
    <tr>
        <th>Position</th>
        <th>Entreprise</th>
        <th>Matchs jouÃ©s</th>
        <th>Victoires</th>
        <th>DÃ©faites</th>
        <th>Points</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Entreprise A</td>
        <td>10</td>
        <td>8</td>
        <td>2</td>
        <td>24</td>
    </tr>
    <tr>
        <td>2</td>
        <td>Entreprise B</td>
        <td>10</td>
        <td>6</td>
        <td>4</td>
        <td>18</td>
    </tr>
</table>

<h3>2.5.4 Format des scores</h3>

<div class="info-box">
<strong>Format attendu :</strong> "X-Y, X-Y" ou "X-Y, X-Y, X-Y" pour un match en 3 sets<br>
<strong>Exemple :</strong> "6-4, 3-6, 7-5"
</div>

<p><strong>RÃ¨gles de validation :</strong></p>
<ul>
    <li>Chaque set doit Ãªtre au format "X-Y" oÃ¹ X et Y sont des entiers</li>
    <li>Le vainqueur d'un set doit avoir au moins 6 jeux</li>
    <li>Si un set se termine 7-X, X doit Ãªtre <= 5</li>
    <li>Si un set se termine 7-6, c'est un tie-break</li>
    <li>Un match se joue au meilleur de 3 sets (2 ou 3 sets maximum)</li>
</ul>

<h2>2.6 Administration</h2>

<div class="danger-box">
<strong>ACCÃˆS RÃ‰SERVÃ‰ :</strong> Cette page est accessible uniquement aux administrateurs. Redirection automatique vers l'accueil pour les autres rÃ´les.
</div>

<h3>2.6.1 Gestion des joueurs</h3>

<h4>Ajouter un joueur</h4>
<p><strong>Formulaire :</strong></p>
<table>
    <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Validation</th>
        <th>Obligatoire</th>
    </tr>
    <tr>
        <td>Nom</td>
        <td>TEXT</td>
        <td>2-50 caractÃ¨res, lettres et espaces uniquement</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>PrÃ©nom</td>
        <td>TEXT</td>
        <td>2-50 caractÃ¨res, lettres et espaces uniquement</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Entreprise</td>
        <td>TEXT</td>
        <td>2-100 caractÃ¨res</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>NÂ° de licence</td>
        <td>TEXT</td>
        <td>Format : LXXXXXX (L suivi de 6 chiffres)</td>
        <td>Oui</td>
    </tr>
    <tr>
        <td>Email</td>
        <td>EMAIL</td>
        <td>Format email valide, unique dans la base</td>
        <td>Oui</td>
    </tr>
</table>

<div class="warning-box">
<strong>RÃ¨gle mÃ©tier :</strong> Si un des champs obligatoires est manquant ou invalide, la crÃ©ation est refusÃ©e avec un message d'erreur explicite.
</div>

<h4>Modifier un joueur</h4>
<ul>
    <li>Tous les champs sauf le numÃ©ro de licence et l'email</li>
    <li>Validation identique Ã  la crÃ©ation</li>
</ul>

<h4>Supprimer un joueur</h4>
<ul>
    <li>Possible uniquement si le joueur n'est dans aucune Ã©quipe active</li>
    <li>Confirmation obligatoire avec message : "Attention, cette action est irrÃ©versible"</li>
</ul>

<h3>2.6.2 Gestion des Ã©quipes</h3>

<h4>Structure d'une Ã©quipe</h4>
<table>
    <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Entreprise</td>
        <td>TEXT</td>
        <td>Nom de l'entreprise reprÃ©sentÃ©e</td>
    </tr>
    <tr>
        <td>Joueur 1</td>
        <td>RÃ©fÃ©rence</td>
        <td>ID du premier joueur</td>
    </tr>
    <tr>
        <td>Joueur 2</td>
        <td>RÃ©fÃ©rence</td>
        <td>ID du second joueur</td>
    </tr>
    <tr>
        <td>Poule</td>
        <td>RÃ©fÃ©rence</td>
        <td>ID de la poule (nullable)</td>
    </tr>
</table>

<h4>RÃ¨gles de validation</h4>
<ul>
    <li>Les deux joueurs doivent appartenir Ã  la mÃªme entreprise</li>
    <li>Un joueur ne peut Ãªtre que dans une seule Ã©quipe par saison</li>
    <li>Une Ã©quipe ne peut Ãªtre dans qu'une seule poule</li>
</ul>

<h4>Actions</h4>
<ul>
    <li><strong>CrÃ©er :</strong> SÃ©lectionner entreprise + 2 joueurs</li>
    <li><strong>Modifier :</strong> Changer les joueurs (si aucun match jouÃ©)</li>
    <li><strong>Supprimer :</strong> Possible uniquement si aucun match n'a Ã©tÃ© jouÃ©</li>
</ul>

<h3>2.6.3 Gestion des poules</h3>

<h4>Structure d'une poule</h4>
<table>
    <tr>
        <th>Champ</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Identifiant</td>
        <td>TEXT</td>
        <td>Ex: "Poule A", "Poule B"</td>
    </tr>
    <tr>
        <td>Ã‰quipes</td>
        <td>Liste</td>
        <td>Exactement 6 Ã©quipes</td>
    </tr>
</table>

<div class="danger-box">
<strong>RÃˆGLE STRICTE :</strong> Une poule doit contenir exactement 6 Ã©quipes. La crÃ©ation/modification est impossible avec un nombre diffÃ©rent.
</div>

<h4>Actions</h4>
<ul>
    <li><strong>CrÃ©er :</strong> Nommer la poule + sÃ©lectionner 6 Ã©quipes</li>
    <li><strong>Modifier :</strong> Changer les Ã©quipes (toutes les Ã©quipes doivent Ãªtre sans matchs jouÃ©s)</li>
    <li><strong>Supprimer :</strong> Possible uniquement si aucun match n'a Ã©tÃ© jouÃ© dans cette poule</li>
</ul>

<h3>2.6.4 Gestion des comptes</h3>

<h4>CrÃ©er un compte pour un joueur</h4>
<p><strong>PrÃ©requis :</strong> Le joueur doit dÃ©jÃ  exister dans la base</p>

<p><strong>Processus :</strong></p>
<ol>
    <li>SÃ©lectionner un joueur existant sans compte</li>
    <li>Le systÃ¨me gÃ©nÃ¨re automatiquement :
        <ul>
            <li>Email : celui du joueur</li>
            <li>Mot de passe temporaire : gÃ©nÃ©rÃ© alÃ©atoirement</li>
            <li>RÃ´le : JOUEUR par dÃ©faut</li>
        </ul>
    </li>
    <li>Afficher le mot de passe temporaire (une seule fois)</li>
    <li>L'utilisateur devra changer son mot de passe Ã  la premiÃ¨re connexion</li>
</ol>

<div class="warning-box">
<strong>SÃ©curitÃ© :</strong> Le mot de passe temporaire doit contenir au minimum 12 caractÃ¨res avec majuscules, minuscules, chiffres et caractÃ¨res spÃ©ciaux.
</div>

<h4>RÃ©initialiser un mot de passe</h4>
<ul>
    <li>GÃ©nÃ©ration d'un nouveau mot de passe temporaire</li>
    <li>Affichage une seule fois Ã  l'admin</li>
    <li>Changement obligatoire Ã  la prochaine connexion</li>
</ul>

<h2>2.7 Profil</h2>

<h3>2.7.1 Objectif</h3>
<p>Permettre Ã  chaque utilisateur de consulter et modifier ses informations personnelles.</p>

<h3>2.7.2 Informations affichÃ©es</h3>

<table>
    <tr>
        <th>Champ</th>
        <th>Modifiable</th>
        <th>Supprimable</th>
        <th>Format</th>
    </tr>
    <tr>
        <td>Nom</td>
        <td>Oui</td>
        <td>Non</td>
        <td>2-50 caractÃ¨res</td>
    </tr>
    <tr>
        <td>PrÃ©nom</td>
        <td>Oui</td>
        <td>Non</td>
        <td>2-50 caractÃ¨res</td>
    </tr>
    <tr>
        <td>Photo de profil</td>
        <td>Oui</td>
        <td>Oui</td>
        <td>JPG/PNG, max 2MB</td>
    </tr>
    <tr>
        <td>Date de naissance</td>
        <td>Oui</td>
        <td>Oui</td>
        <td>YYYY-MM-DD</td>
    </tr>
    <tr>
        <td>Email</td>
        <td>Oui</td>
        <td>Non</td>
        <td>Format email valide</td>
    </tr>
    <tr>
        <td>NÂ° de licence</td>
        <td>Non</td>
        <td>Non</td>
        <td>Lecture seule</td>
    </tr>
</table>

<h3>2.7.3 RÃ¨gles de validation</h3>

<ul>
    <li><strong>Nom/PrÃ©nom :</strong> Lettres, espaces, tirets et apostrophes uniquement</li>
    <li><strong>Date de naissance :</strong> 
        <ul>
            <li>L'utilisateur doit avoir au moins 16 ans</li>
            <li>Date ne peut pas Ãªtre dans le futur</li>
        </ul>
    </li>
    <li><strong>Email :</strong> 
        <ul>
            <li>Format valide (regex standard)</li>
            <li>Unique dans la base de donnÃ©es</li>
        </ul>
    </li>
    <li><strong>Photo :</strong>
        <ul>
            <li>Formats acceptÃ©s : .jpg, .jpeg, .png</li>
            <li>Taille maximale : 2MB</li>
            <li>Dimensions recommandÃ©es : 400x400px</li>
        </ul>
    </li>
</ul>

<h3>2.7.4 Changement de mot de passe</h3>

<p><strong>Formulaire :</strong></p>
<ul>
    <li>Mot de passe actuel (obligatoire)</li>
    <li>Nouveau mot de passe (obligatoire)</li>
    <li>Confirmation du nouveau mot de passe (obligatoire)</li>
</ul>

<p><strong>RÃ¨gles de validation :</strong></p>
<ul>
    <li>Le mot de passe actuel doit Ãªtre correct</li>
    <li>Le nouveau mot de passe doit respecter la politique de sÃ©curitÃ© (voir section 4.4)</li>
    <li>Les deux nouveaux mots de passe doivent correspondre</li>
    <li>Le nouveau mot de passe doit Ãªtre diffÃ©rent de l'ancien</li>
</ul>

<h1>3. SpÃ©cifications Techniques</h1>

<h2>3.1 Architecture systÃ¨me</h2>

<h3>3.1.1 Architecture globale</h3>

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CLIENT (Browser)                   â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         VueJS 3.x                   â”‚    â”‚
â”‚  â”‚  - Vue Router                       â”‚    â”‚
â”‚  â”‚  - Axios (HTTP client)              â”‚    â”‚
â”‚  â”‚  - TailwindCSS                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP/HTTPS
                   â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SERVER                             â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚       FastAPI (Python 3.11+)        â”‚    â”‚
â”‚  â”‚  - JWT Authentication               â”‚    â”‚
â”‚  â”‚  - Pydantic Validation              â”‚    â”‚
â”‚  â”‚  - SQLAlchemy ORM                   â”‚    â”‚
â”‚  â”‚  - Password Hashing (bcrypt)        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                   â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚       SQLite Database               â”‚    â”‚
â”‚  â”‚  - File: padel_corpo.db             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

<h3>3.1.2 Stack technologique imposÃ©e</h3>

<table>
    <tr>
        <th>Composant</th>
        <th>Technologie</th>
        <th>Version minimale</th>
    </tr>
    <tr>
        <td><strong>Frontend</strong></td>
        <td>VueJS</td>
        <td>3.3.x</td>
    </tr>
    <tr>
        <td><strong>Routing</strong></td>
        <td>Vue Router</td>
        <td>4.x</td>
    </tr>
    <tr>
        <td><strong>HTTP Client</strong></td>
        <td>Axios</td>
        <td>1.x</td>
    </tr>
    <tr>
        <td><strong>CSS Framework</strong></td>
        <td>TailwindCSS</td>
        <td>3.x</td>
    </tr>
    <tr>
        <td><strong>Backend</strong></td>
        <td>FastAPI</td>
        <td>0.104.x</td>
    </tr>
    <tr>
        <td><strong>Python</strong></td>
        <td>Python</td>
        <td>3.11+</td>
    </tr>
    <tr>
        <td><strong>ORM</strong></td>
        <td>SQLAlchemy</td>
        <td>2.x</td>
    </tr>
    <tr>
        <td><strong>Database</strong></td>
        <td>SQLite</td>
        <td>3.x</td>
    </tr>
    <tr>
        <td><strong>Tests Backend</strong></td>
        <td>Pytest</td>
        <td>7.x</td>
    </tr>
    <tr>
        <td><strong>Tests E2E</strong></td>
        <td>Cypress</td>
        <td>13.x</td>
    </tr>
</table>

<h2>3.2 ModÃ¨le de donnÃ©es</h2>

<h3>3.2.1 Diagramme ERD</h3>

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users          â”‚         â”‚   players        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ id (PK)          â”‚
â”‚ email (UNIQUE)   â”‚         â”‚ first_name       â”‚
â”‚ password_hash    â”‚         â”‚ last_name        â”‚
â”‚ role             â”‚         â”‚ company          â”‚
â”‚ is_active        â”‚         â”‚ license_number   â”‚
â”‚ created_at       â”‚         â”‚ birth_date       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ photo_url        â”‚
                              â”‚ user_id (FK)     â”‚
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                      â”‚
                         â–¼                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   teams          â”‚   â”‚   matches        â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ id (PK)          â”‚   â”‚ id (PK)          â”‚
              â”‚ company          â”‚â”€â”€â”€â”‚ team1_id (FK)    â”‚
              â”‚ player1_id (FK)  â”‚   â”‚ team2_id (FK)    â”‚
              â”‚ player2_id (FK)  â”‚   â”‚ event_id (FK)    â”‚
              â”‚ pool_id (FK)     â”‚   â”‚ court_number     â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ status           â”‚
                     â”‚                â”‚ score_team1      â”‚
                     â”‚                â”‚ score_team2      â”‚
                     â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   pools          â”‚         â”‚   events         â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ id (PK)          â”‚         â”‚ id (PK)          â”‚
              â”‚ name (UNIQUE)    â”‚         â”‚ event_date       â”‚
              â”‚ created_at       â”‚         â”‚ event_time       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ created_at       â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   login_attempts     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              â”‚
â”‚ email                â”‚
â”‚ attempts_count       â”‚
â”‚ last_attempt         â”‚
â”‚ locked_until         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

<h3>3.2.2 SchÃ©ma SQL dÃ©taillÃ©</h3>

<pre>
-- Table users
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,
    role TEXT NOT NULL CHECK(role IN ('JOUEUR', 'ADMINISTRATEUR')),
    is_active BOOLEAN DEFAULT TRUE,
    must_change_password BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table players
CREATE TABLE players (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    company TEXT NOT NULL,
    license_number TEXT NOT NULL UNIQUE,
    birth_date DATE,
    photo_url TEXT,
    user_id INTEGER UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL,
    CONSTRAINT chk_license_format CHECK(license_number GLOB 'L[0-9][0-9][0-9][0-9][0-9][0-9]')
);

-- Table pools
CREATE TABLE pools (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table teams
CREATE TABLE teams (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    company TEXT NOT NULL,
    player1_id INTEGER NOT NULL,
    player2_id INTEGER NOT NULL,
    pool_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (player1_id) REFERENCES players(id) ON DELETE CASCADE,
    FOREIGN KEY (player2_id) REFERENCES players(id) ON DELETE CASCADE,
    FOREIGN KEY (pool_id) REFERENCES pools(id) ON DELETE SET NULL,
    CONSTRAINT chk_different_players CHECK(player1_id != player2_id)
);

-- Table events
CREATE TABLE events (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    event_date DATE NOT NULL,
    event_time TIME NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table matches
CREATE TABLE matches (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    event_id INTEGER NOT NULL,
    team1_id INTEGER NOT NULL,
    team2_id INTEGER NOT NULL,
    court_number INTEGER NOT NULL CHECK(court_number BETWEEN 1 AND 10),
    status TEXT NOT NULL DEFAULT 'A_VENIR' CHECK(status IN ('A_VENIR', 'TERMINE', 'ANNULE')),
    score_team1 TEXT,
    score_team2 TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (event_id) REFERENCES events(id) ON DELETE CASCADE,
    FOREIGN KEY (team1_id) REFERENCES teams(id) ON DELETE CASCADE,
    FOREIGN KEY (team2_id) REFERENCES teams(id) ON DELETE CASCADE,
    CONSTRAINT chk_different_teams CHECK(team1_id != team2_id)
);

-- Table login_attempts
CREATE TABLE login_attempts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT NOT NULL,
    attempts_count INTEGER DEFAULT 0,
    last_attempt TIMESTAMP,
    locked_until TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Indexes pour performances
CREATE INDEX idx_players_user_id ON players(user_id);
CREATE INDEX idx_teams_players ON teams(player1_id, player2_id);
CREATE INDEX idx_teams_pool ON teams(pool_id);
CREATE INDEX idx_matches_event ON matches(event_id);
CREATE INDEX idx_matches_teams ON matches(team1_id, team2_id);
CREATE INDEX idx_matches_status ON matches(status);
CREATE INDEX idx_events_date ON events(event_date);
CREATE INDEX idx_login_attempts_email ON login_attempts(email);
</pre>

<h2>3.3 API REST</h2>

<h3>3.3.1 Convention de nommage</h3>

<ul>
    <li><strong>Base URL :</strong> <code>http://localhost:8000/api/v1</code></li>
    <li><strong>Format :</strong> JSON uniquement</li>
    <li><strong>Authentification :</strong> Bearer Token (JWT) dans le header Authorization</li>
</ul>

<h3>3.3.2 Endpoints - Authentification</h3>

<h4>POST /auth/login</h4>
<p><strong>Description :</strong> Authentifier un utilisateur</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "email": "john.doe@example.com",
  "password": "SecureP@ssw0rd"
}
</pre>

<p><strong>Response Success (200) :</strong></p>
<pre>
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user": {
    "id": 1,
    "email": "john.doe@example.com",
    "role": "JOUEUR",
    "must_change_password": false
  }
}
</pre>

<p><strong>Response Error (401) :</strong></p>
<pre>
{
  "detail": "Email ou mot de passe incorrect",
  "attempts_remaining": 3
}
</pre>

<p><strong>Response Locked (403) :</strong></p>
<pre>
{
  "detail": "Compte bloquÃ©",
  "locked_until": "2025-10-18T15:30:00",
  "minutes_remaining": 28
}
</pre>

<h4>POST /auth/change-password</h4>
<p><strong>Description :</strong> Changer son mot de passe</p>
<p><strong>Authentification :</strong> Requise</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "current_password": "OldP@ssw0rd",
  "new_password": "NewSecureP@ssw0rd123!",
  "confirm_password": "NewSecureP@ssw0rd123!"
}
</pre>

<p><strong>Response Success (200) :</strong></p>
<pre>
{
  "message": "Mot de passe modifiÃ© avec succÃ¨s"
}
</pre>

<h4>POST /auth/logout</h4>
<p><strong>Description :</strong> DÃ©connecter l'utilisateur</p>
<p><strong>Authentification :</strong> Requise</p>

<h3>3.3.3 Endpoints - Joueurs</h3>

<h4>GET /players</h4>
<p><strong>Description :</strong> Liste tous les joueurs (Admin uniquement)</p>
<p><strong>Authentification :</strong> Admin</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "players": [
    {
      "id": 1,
      "first_name": "John",
      "last_name": "Doe",
      "company": "Tech Corp",
      "license_number": "L123456",
      "birth_date": "1990-05-15",
      "photo_url": null,
      "has_account": true
    }
  ],
  "total": 1
}
</pre>

<h4>GET /players/{id}</h4>
<p><strong>Description :</strong> DÃ©tails d'un joueur</p>
<p><strong>Authentification :</strong> Requise</p>

<h4>POST /players</h4>
<p><strong>Description :</strong> CrÃ©er un joueur (Admin uniquement)</p>
<p><strong>Authentification :</strong> Admin</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "first_name": "John",
  "last_name": "Doe",
  "company": "Tech Corp",
  "license_number": "L123456",
  "email": "john.doe@example.com"
}
</pre>

<p><strong>Validation :</strong></p>
<ul>
    <li><code>first_name</code>: 2-50 caractÃ¨res, lettres et espaces</li>
    <li><code>last_name</code>: 2-50 caractÃ¨res, lettres et espaces</li>
    <li><code>company</code>: 2-100 caractÃ¨res</li>
    <li><code>license_number</code>: Format LXXXXXX (unique)</li>
    <li><code>email</code>: Format email valide (unique)</li>
</ul>

<h4>PUT /players/{id}</h4>
<p><strong>Description :</strong> Modifier un joueur (Admin uniquement)</p>

<h4>DELETE /players/{id}</h4>
<p><strong>Description :</strong> Supprimer un joueur (Admin uniquement)</p>
<p><strong>Condition :</strong> Le joueur ne doit appartenir Ã  aucune Ã©quipe active</p>

<h3>3.3.4 Endpoints - Ã‰quipes</h3>

<h4>GET /teams</h4>
<p><strong>Description :</strong> Liste toutes les Ã©quipes</p>
<p><strong>Query Params :</strong></p>
<ul>
    <li><code>pool_id</code> (optional): Filtrer par poule</li>
    <li><code>company</code> (optional): Filtrer par entreprise</li>
</ul>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "teams": [
    {
      "id": 1,
      "company": "Tech Corp",
      "players": [
        {
          "id": 1,
          "first_name": "John",
          "last_name": "Doe"
        },
        {
          "id": 2,
          "first_name": "Jane",
          "last_name": "Smith"
        }
      ],
      "pool": {
        "id": 1,
        "name": "Poule A"
      }
    }
  ],
  "total": 1
}
</pre>

<h4>POST /teams</h4>
<p><strong>Description :</strong> CrÃ©er une Ã©quipe (Admin uniquement)</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "company": "Tech Corp",
  "player1_id": 1,
  "player2_id": 2,
  "pool_id": 1
}
</pre>

<p><strong>Validations :</strong></p>
<ul>
    <li>Les deux joueurs doivent appartenir Ã  la mÃªme entreprise</li>
    <li>Chaque joueur ne peut Ãªtre que dans une Ã©quipe par saison</li>
    <li><code>player1_id</code> â‰  <code>player2_id</code></li>
</ul>

<h4>PUT /teams/{id}</h4>
<p><strong>Description :</strong> Modifier une Ã©quipe (Admin uniquement)</p>
<p><strong>Condition :</strong> Aucun match jouÃ©</p>

<h4>DELETE /teams/{id}</h4>
<p><strong>Description :</strong> Supprimer une Ã©quipe (Admin uniquement)</p>
<p><strong>Condition :</strong> Aucun match jouÃ©</p>

<h3>3.3.5 Endpoints - Poules</h3>

<h4>GET /pools</h4>
<p><strong>Description :</strong> Liste toutes les poules</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "pools": [
    {
      "id": 1,
      "name": "Poule A",
      "teams_count": 6,
      "teams": [...]
    }
  ]
}
</pre>

<h4>POST /pools</h4>
<p><strong>Description :</strong> CrÃ©er une poule (Admin uniquement)</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "name": "Poule A",
  "team_ids": [1, 2, 3, 4, 5, 6]
}
</pre>

<p><strong>Validation :</strong></p>
<ul>
    <li>Exactement 6 Ã©quipes</li>
    <li>Nom unique</li>
</ul>

<h4>PUT /pools/{id}</h4>
<p><strong>Description :</strong> Modifier une poule (Admin uniquement)</p>
<p><strong>Condition :</strong> Aucun match jouÃ© dans la poule</p>

<h4>DELETE /pools/{id}</h4>
<p><strong>Description :</strong> Supprimer une poule (Admin uniquement)</p>
<p><strong>Condition :</strong> Aucun match jouÃ© dans la poule</p>

<h3>3.3.6 Endpoints - Ã‰vÃ©nements</h3>

<h4>GET /events</h4>
<p><strong>Description :</strong> Liste tous les Ã©vÃ©nements</p>
<p><strong>Query Params :</strong></p>
<ul>
    <li><code>start_date</code> (optional): Date de dÃ©but (YYYY-MM-DD)</li>
    <li><code>end_date</code> (optional): Date de fin (YYYY-MM-DD)</li>
    <li><code>month</code> (optional): Mois spÃ©cifique (YYYY-MM)</li>
</ul>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "events": [
    {
      "id": 1,
      "event_date": "2025-11-15",
      "event_time": "19:30",
      "matches": [
        {
          "id": 1,
          "court_number": 1,
          "team1": {...},
          "team2": {...},
          "status": "A_VENIR"
        }
      ]
    }
  ]
}
</pre>

<h4>POST /events</h4>
<p><strong>Description :</strong> CrÃ©er un Ã©vÃ©nement (Admin uniquement)</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "event_date": "2025-11-15",
  "event_time": "19:30",
  "matches": [
    {
      "court_number": 1,
      "team1_id": 1,
      "team2_id": 2
    },
    {
      "court_number": 2,
      "team1_id": 3,
      "team2_id": 4
    }
  ]
}
</pre>

<p><strong>Validations :</strong></p>
<ul>
    <li><code>event_date</code> >= aujourd'hui</li>
    <li><code>event_time</code> format HH:MM</li>
    <li>1 Ã  3 matchs par Ã©vÃ©nement</li>
    <li>Pas de piste en double pour le mÃªme Ã©vÃ©nement</li>
    <li>Une Ã©quipe ne peut jouer qu'un match par Ã©vÃ©nement</li>
</ul>

<h4>PUT /events/{id}</h4>
<p><strong>Description :</strong> Modifier un Ã©vÃ©nement (Admin uniquement)</p>

<h4>DELETE /events/{id}</h4>
<p><strong>Description :</strong> Supprimer un Ã©vÃ©nement (Admin uniquement)</p>
<p><strong>Condition :</strong> Tous les matchs doivent avoir le statut A_VENIR</p>

<h3>3.3.7 Endpoints - Matchs</h3>

<h4>GET /matches</h4>
<p><strong>Description :</strong> Liste des matchs</p>
<p><strong>Query Params :</strong></p>
<ul>
    <li><code>upcoming</code>: true pour les 30 prochains jours</li>
    <li><code>team_id</code>: Filtrer par Ã©quipe</li>
    <li><code>status</code>: Filtrer par statut</li>
    <li><code>my_matches</code>: true pour les matchs de l'utilisateur connectÃ©</li>
</ul>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "matches": [
    {
      "id": 1,
      "event": {
        "date": "2025-11-15",
        "time": "19:30"
      },
      "court_number": 1,
      "team1": {
        "id": 1,
        "company": "Tech Corp",
        "players": [...]
      },
      "team2": {
        "id": 2,
        "company": "Innov Ltd",
        "players": [...]
      },
      "status": "A_VENIR",
      "score_team1": null,
      "score_team2": null
    }
  ],
  "total": 1
}
</pre>

<h4>POST /matches</h4>
<p><strong>Description :</strong> CrÃ©er un match (Admin uniquement)</p>

<h4>PUT /matches/{id}</h4>
<p><strong>Description :</strong> Modifier un match (Admin uniquement)</p>

<p><strong>Request Body (exemple - mise Ã  jour du score) :</strong></p>
<pre>
{
  "status": "TERMINE",
  "score_team1": "6-4, 6-3",
  "score_team2": "4-6, 3-6"
}
</pre>

<p><strong>Validation du score :</strong></p>
<ul>
    <li>Format : "X-Y, X-Y" ou "X-Y, X-Y, X-Y"</li>
    <li>Chaque set : vainqueur >= 6 jeux</li>
    <li>Si 7-X : X <= 5</li>
    <li>7-6 autorisÃ© (tie-break)</li>
</ul>

<h4>DELETE /matches/{id}</h4>
<p><strong>Description :</strong> Supprimer un match (Admin uniquement)</p>
<p><strong>Condition :</strong> Statut = A_VENIR</p>

<h3>3.3.8 Endpoints - RÃ©sultats</h3>

<h4>GET /results/my-results</h4>
<p><strong>Description :</strong> RÃ©sultats de l'utilisateur connectÃ©</p>
<p><strong>Authentification :</strong> Joueur</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "results": [
    {
      "match_id": 1,
      "date": "2025-10-15",
      "opponents": {
        "company": "Innov Ltd",
        "players": ["Alice Martin", "Bob Dupont"]
      },
      "score": "6-4, 6-3",
      "result": "VICTOIRE",
      "court_number": 1
    }
  ],
  "statistics": {
    "total_matches": 10,
    "wins": 7,
    "losses": 3,
    "win_rate": 70.0
  }
}
</pre>

<h4>GET /results/rankings</h4>
<p><strong>Description :</strong> Classement gÃ©nÃ©ral des entreprises</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "rankings": [
    {
      "position": 1,
      "company": "Tech Corp",
      "matches_played": 10,
      "wins": 8,
      "losses": 2,
      "points": 24,
      "sets_won": 18,
      "sets_lost": 6
    }
  ]
}
</pre>

<h3>3.3.9 Endpoints - Profil</h3>

<h4>GET /profile/me</h4>
<p><strong>Description :</strong> Profil de l'utilisateur connectÃ©</p>
<p><strong>Authentification :</strong> Requise</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "user": {
    "id": 1,
    "email": "john.doe@example.com",
    "role": "JOUEUR"
  },
  "player": {
    "id": 1,
    "first_name": "John",
    "last_name": "Doe",
    "company": "Tech Corp",
    "license_number": "L123456",
    "birth_date": "1990-05-15",
    "photo_url": "/uploads/profile_1.jpg"
  }
}
</pre>

<h4>PUT /profile/me</h4>
<p><strong>Description :</strong> Modifier son profil</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "first_name": "John",
  "last_name": "Doe",
  "birth_date": "1990-05-15",
  "email": "john.doe@newemail.com"
}
</pre>

<h4>POST /profile/me/photo</h4>
<p><strong>Description :</strong> Upload photo de profil</p>
<p><strong>Content-Type :</strong> multipart/form-data</p>
<p><strong>Max size :</strong> 2MB</p>
<p><strong>Formats :</strong> .jpg, .jpeg, .png</p>

<h4>DELETE /profile/me/photo</h4>
<p><strong>Description :</strong> Supprimer la photo de profil</p>

<h3>3.3.10 Endpoints - Administration</h3>

<h4>POST /admin/accounts/create</h4>
<p><strong>Description :</strong> CrÃ©er un compte pour un joueur</p>
<p><strong>Authentification :</strong> Admin</p>

<p><strong>Request Body :</strong></p>
<pre>
{
  "player_id": 1,
  "role": "JOUEUR"
}
</pre>

<p><strong>Response (201) :</strong></p>
<pre>
{
  "message": "Compte crÃ©Ã© avec succÃ¨s",
  "email": "john.doe@example.com",
  "temporary_password": "T3mp@ryP@ss2025!Xy",
  "warning": "Ce mot de passe ne sera affichÃ© qu'une seule fois"
}
</pre>

<h4>POST /admin/accounts/{user_id}/reset-password</h4>
<p><strong>Description :</strong> RÃ©initialiser le mot de passe d'un utilisateur</p>
<p><strong>Authentification :</strong> Admin</p>

<p><strong>Response (200) :</strong></p>
<pre>
{
  "message": "Mot de passe rÃ©initialisÃ©",
  "temporary_password": "N3wT3mp@ryP@ss!",
  "warning": "Ce mot de passe ne sera affichÃ© qu'une seule fois"
}
</pre>

<h2>3.4 Formats et Contraintes</h2>

<h3>3.4.1 Formats de dates et heures</h3>

<table>
    <tr>
        <th>Type</th>
        <th>Format</th>
        <th>Exemple</th>
        <th>Regex</th>
    </tr>
    <tr>
        <td>Date</td>
        <td>YYYY-MM-DD</td>
        <td>2025-11-15</td>
        <td>^\d{4}-\d{2}-\d{2}$</td>
    </tr>
    <tr>
        <td>Heure</td>
        <td>HH:MM</td>
        <td>19:30</td>
        <td>^([01]\d|2[0-3]):([0-5]\d)$</td>
    </tr>
    <tr>
        <td>Timestamp</td>
        <td>ISO 8601</td>
        <td>2025-11-15T19:30:00Z</td>
        <td>-</td>
    </tr>
</table>

<h3>3.4.2 Formats de validation</h3>

<table>
    <tr>
        <th>Champ</th>
        <th>Regex / RÃ¨gle</th>
        <th>Message d'erreur</th>
    </tr>
    <tr>
        <td>Email</td>
        <td>^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$</td>
        <td>"Format d'email invalide"</td>
    </tr>
    <tr>
        <td>Licence</td>
        <td>^L\d{6}$</td>
        <td>"Le numÃ©ro de licence doit Ãªtre au format LXXXXXX"</td>
    </tr>
    <tr>
        <td>Nom/PrÃ©nom</td>
        <td>^[a-zA-ZÃ€-Ã¿\s'-]{2,50}$</td>
        <td>"2 Ã  50 caractÃ¨res, lettres uniquement"</td>
    </tr>
    <tr>
        <td>Score</td>
        <td>^(\d+-\d+)(,\s*\d+-\d+){1,2}$</td>
        <td>"Format de score invalide (ex: 6-4, 6-3)"</td>
    </tr>
    <tr>
        <td>Court</td>
        <td>1 <= n <= 10</td>
        <td>"Le numÃ©ro de piste doit Ãªtre entre 1 et 10"</td>
    </tr>
</table>

<h3>3.4.3 Codes de statut HTTP</h3>

<table>
    <tr>
        <th>Code</th>
        <th>Signification</th>
        <th>Utilisation</th>
    </tr>
    <tr>
        <td>200</td>
        <td>OK</td>
        <td>RequÃªte rÃ©ussie (GET, PUT)</td>
    </tr>
    <tr>
        <td>201</td>
        <td>Created</td>
        <td>Ressource crÃ©Ã©e (POST)</td>
    </tr>
    <tr>
        <td>204</td>
        <td>No Content</td>
        <td>Suppression rÃ©ussie (DELETE)</td>
    </tr>
    <tr>
        <td>400</td>
        <td>Bad Request</td>
        <td>DonnÃ©es invalides</td>
    </tr>
    <tr>
        <td>401</td>
        <td>Unauthorized</td>
        <td>Non authentifiÃ©</td>
    </tr>
    <tr>
        <td>403</td>
        <td>Forbidden</td>
        <td>AccÃ¨s interdit (rÃ´le insuffisant ou compte bloquÃ©)</td>
    </tr>
    <tr>
        <td>404</td>
        <td>Not Found</td>
        <td>Ressource inexistante</td>
    </tr>
    <tr>
        <td>409</td>
        <td>Conflict</td>
        <td>Conflit (email/licence dÃ©jÃ  utilisÃ©)</td>
    </tr>
    <tr>
        <td>422</td>
        <td>Unprocessable Entity</td>
        <td>Validation Pydantic Ã©chouÃ©e</td>
    </tr>
    <tr>
        <td>500</td>
        <td>Internal Server Error</td>
        <td>Erreur serveur</td>
    </tr>
</table>

<h1>4. Exigences de SÃ©curitÃ©</h1>

<div class="danger-box">
<strong>PRIORITÃ‰ MAXIMALE :</strong> La sÃ©curitÃ© est un critÃ¨re d'Ã©valuation majeur de ce projet. Toutes les exigences de cette section sont obligatoires.
</div>

<h2>4.1 Authentification et Autorisation</h2>

<h3>4.1.1 JWT (JSON Web Tokens)</h3>

<p><strong>Configuration obligatoire :</strong></p>
<ul>
    <li><strong>Algorithme :</strong> HS256</li>
    <li><strong>Secret :</strong> GÃ©nÃ©rÃ© alÃ©atoirement, stockÃ© en variable d'environnement</li>
    <li><strong>DurÃ©e de validitÃ© :</strong> 24 heures</li>
    <li><strong>Payload minimum :</strong>
        <ul>
            <li><code>sub</code>: user_id</li>
            <li><code>email</code>: email de l'utilisateur</li>
            <li><code>role</code>: rÃ´le de l'utilisateur</li>
            <li><code>exp</code>: timestamp d'expiration</li>
        </ul>
    </li>
</ul>

<p><strong>ImplÃ©mentation :</strong></p>
<pre>
# Exemple Python avec PyJWT
import jwt
from datetime import datetime, timedelta

def create_access_token(user_id: int, email: str, role: str) -> str:
    payload = {
        "sub": user_id,
        "email": email,
        "role": role,
        "exp": datetime.utcnow() + timedelta(hours=24)
    }
    return jwt.encode(payload, SECRET_KEY, algorithm="HS256")
</pre>

<h3>4.1.2 Protection des routes</h3>

<p><strong>Middleware d'authentification :</strong></p>
<ul>
    <li>VÃ©rifier la prÃ©sence du token dans le header <code>Authorization: Bearer {token}</code></li>
    <li>Valider le token (signature, expiration)</li>
    <li>Extraire les informations utilisateur</li>
    <li>Retourner 401 si token invalide ou absent</li>
</ul>

<p><strong>Middleware d'autorisation :</strong></p>
<ul>
    <li>VÃ©rifier que le rÃ´le de l'utilisateur correspond aux permissions requises</li>
    <li>Retourner 403 si permissions insuffisantes</li>
</ul>

<table>
    <tr>
        <th>Route</th>
        <th>Authentification</th>
        <th>RÃ´le requis</th>
    </tr>
    <tr>
        <td>/api/v1/auth/login</td>
        <td>Non</td>
        <td>-</td>
    </tr>
    <tr>
        <td>/api/v1/profile/*</td>
        <td>Oui</td>
        <td>Tous</td>
    </tr>
    <tr>
        <td>/api/v1/players (GET)</td>
        <td>Oui</td>
        <td>Admin</td>
    </tr>
    <tr>
        <td>/api/v1/admin/*</td>
        <td>Oui</td>
        <td>Admin</td>
    </tr>
    <tr>
        <td>/api/v1/matches (POST/PUT/DELETE)</td>
        <td>Oui</td>
        <td>Admin</td>
    </tr>
</table>

<h2>4.2 Protection contre les attaques</h2>

<h3>4.2.1 Injection SQL</h3>

<div class="danger-box">
<strong>OBLIGATOIRE :</strong> Utilisation exclusive de l'ORM SQLAlchemy. Aucune requÃªte SQL brute n'est autorisÃ©e.
</div>

<p><strong>Exemple correct :</strong></p>
<pre>
# âœ… CORRECT - Utilisation de l'ORM
user = db.query(User).filter(User.email == email).first()

# âŒ INTERDIT - RequÃªte SQL brute
user = db.execute(f"SELECT * FROM users WHERE email = '{email}'")
</pre>

<h3>4.2.2 XSS (Cross-Site Scripting)</h3>

<p><strong>Protection cÃ´tÃ© backend :</strong></p>
<ul>
    <li>Sanitization de toutes les entrÃ©es textuelles</li>
    <li>Ã‰chappement des caractÃ¨res spÃ©ciaux HTML</li>
    <li>Headers de sÃ©curitÃ© :
        <ul>
            <li><code>X-Content-Type-Options: nosniff</code></li>
            <li><code>X-Frame-Options: DENY</code></li>
            <li><code>Content-Security-Policy</code></li>
        </ul>
    </li>
</ul>

<p><strong>Protection cÃ´tÃ© frontend :</strong></p>
<ul>
    <li>Utilisation de <code>v-text</code> au lieu de <code>v-html</code> dans VueJS</li>
    <li>Validation des donnÃ©es avant affichage</li>
    <li>Pas d'<code>eval()</code> ou d'exÃ©cution de code dynamique</li>
</ul>

<p><strong>Exemple de sanitization :</strong></p>
<pre>
import bleach

def sanitize_input(text: str) -> str:
    # Supprime tous les tags HTML
    return bleach.clean(text, tags=[], strip=True)
</pre>

<h3>4.2.3 CSRF (Cross-Site Request Forgery)</h3>

<p><strong>Protection :</strong></p>
<ul>
    <li>Utilisation de tokens JWT (inclus dans les headers, pas dans les cookies)</li>
    <li>VÃ©rification de l'origin des requÃªtes</li>
    <li>Header <code>SameSite=Strict</code> si utilisation de cookies</li>
</ul>

<h3>4.2.4 Brute Force (Anti-bot)</h3>

<div class="success-box">
<strong>IMPLÃ‰MENTATION REQUISE :</strong> MÃ©canisme de blocage aprÃ¨s 5 tentatives Ã©chouÃ©es
</div>

<p><strong>Algorithme :</strong></p>
<pre>
1. Tentative de connexion reÃ§ue
2. VÃ©rifier dans login_attempts si l'email est bloquÃ©
   - Si locked_until > maintenant : retourner 403 avec temps restant
3. VÃ©rifier les credentials
   - Si invalides :
     * IncrÃ©menter attempts_count
     * Si attempts_count >= 5 :
       - DÃ©finir locked_until = maintenant + 30 minutes
     * Retourner 401 avec tentatives restantes
   - Si valides :
     * RÃ©initialiser attempts_count Ã  0
     * Retourner le token
</pre>

<p><strong>Table de suivi :</strong></p>
<pre>
CREATE TABLE

<tr>
    <td>Protection SQL Injection</td>
    <td>0.5</td>
    <td>Utilisation ORM uniquement</td>
</tr>
<tr>
    <td>Headers de sÃ©curitÃ©</td>
    <td>0.5</td>
    <td>X-Content-Type-Options, etc.</td>
</tr>
<tr>
    <td colspan="3" style="background-color: #1e40af; color: white; font-weight: bold;">TESTS (4 points)</td>
</tr>
<tr>
    <td>Tests unitaires backend</td>
    <td>2</td>
    <td>Couverture >= 70%, scÃ©narios complets</td>
</tr>
<tr>
    <td>Tests E2E Cypress</td>
    <td>2</td>
    <td>Parcours visiteur, joueur, admin</td>
</tr>
<tr>
    <td colspan="3" style="background-color: #1e40af; color: white; font-weight: bold;">QUALITÃ‰ DU CODE (2 points)</td>
</tr>
<tr>
    <td>Organisation et structure</td>
    <td>0.5</td>
    <td>SÃ©paration des responsabilitÃ©s</td>
</tr>
<tr>
    <td>Respect des conventions</td>
    <td>0.5</td>
    <td>PEP8 (Python), style VueJS</td>
</tr>
<tr>
    <td>Gestion des erreurs</td>
    <td>0.5</td>
    <td>Messages clairs, logging</td>
</tr>
<tr>
    <td>Documentation (README)</td>
    <td>0.5</td>
    <td>Installation, configuration, utilisation</td>
</tr>
<tr>
    <td colspan="3" style="background-color: #1e40af; color: white; font-weight: bold;">RAPPORT (1 point)</td>
</tr>
<tr>
    <td>QualitÃ© du rapport</td>
    <td>1</td>
    <td>ClartÃ©, structure, screenshots</td>
</tr>
<tr>
    <td colspan="3" style="background-color: #10b981; color: white; font-weight: bold;">BONUS (max +2 points)</td>
</tr>
<tr>
    <td>Tests OWASP</td>
    <td>+1</td>
    <td>Tests de sÃ©curitÃ© avancÃ©s</td>
</tr>
<tr>
    <td>FonctionnalitÃ©s supplÃ©mentaires</td>
    <td>+0.5</td>
    <td>Export PDF, statistiques avancÃ©es</td>
</tr>
<tr>
    <td>Interface exceptionnelle</td>
    <td>+0.5</td>
    <td>UX/UI trÃ¨s soignÃ©e</td>
</tr>
</table>
</pre>

<h1>7. Annexes</h1>

<h2>7.1 Kit de dÃ©marrage</h2>

<p>Un kit de dÃ©marrage est fourni avec ce cahier des charges. Il contient :</p>

<ul>
<li>Structure backend FastAPI avec authentification JWT fonctionnelle</li>
<li>Structure frontend VueJS avec routing configurÃ©</li>
<li>Base de donnÃ©es SQLite initialisÃ©e</li>
<li>Page d'accueil et page de login</li>
<li>README complet pour le lancement</li>
</ul>

<div class="info-box">
<strong>Important :</strong> Le kit de dÃ©marrage fournit uniquement la base. Toutes les autres fonctionnalitÃ©s doivent Ãªtre dÃ©veloppÃ©es par vous.
</div>

<h2>7.2 Commandes utiles</h2>

<h3>7.2.1 Backend</h3>

<pre>
# Installation
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
pip install -r requirements.txt

# Lancement
uvicorn app.main:app --reload --port 8000

# Tests
pytest
pytest --cov=app --cov-report=html

# Migrations (si Alembic utilisÃ©)
alembic revision --autogenerate -m "description"
alembic upgrade head
</pre>

<h3>7.2.2 Frontend</h3>

<pre>
# Installation
cd frontend
npm install

# Lancement dev
npm run dev

# Build production
npm run build

# Tests E2E
npx cypress open
npx cypress run
</pre>

<h2>7.3 Variables d'environnement</h2>

<p><strong>Fichier backend/.env :</strong></p>
<pre>
# Database
DATABASE_URL=sqlite:///./padel_corpo.db

# Security
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# CORS
ALLOWED_ORIGINS=http://localhost:5173

# Upload
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE=2097152
</pre>

<p><strong>Fichier frontend/.env :</strong></p>
<pre>
VITE_API_BASE_URL=http://localhost:8000/api/v1
</pre>

<h2>7.4 Ressources recommandÃ©es</h2>

<h3>7.4.1 Documentation officielle</h3>

<ul>
<li><strong>FastAPI :</strong> https://fastapi.tiangolo.com/</li>
<li><strong>VueJS 3 :</strong> https://vuejs.org/</li>
<li><strong>SQLAlchemy :</strong> https://docs.sqlalchemy.org/</li>
<li><strong>Pytest :</strong> https://docs.pytest.org/</li>
<li><strong>Cypress :</strong> https://docs.cypress.io/</li>
<li><strong>OWASP Top 10 :</strong> https://owasp.org/www-project-top-ten/</li>
</ul>

<h3>7.4.2 Tutoriels utiles</h3>

<ul>
<li>JWT Authentication avec FastAPI</li>
<li>Vue Router pour SPA</li>
<li>SQLAlchemy ORM best practices</li>
<li>Writing effective Pytest tests</li>
<li>Cypress E2E testing guide</li>
</ul>

<h2>7.5 Exemples de wireframes</h2>

<h3>7.5.1 Page de login</h3>

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚           ğŸ¾ CORPO PADEL                â”‚
â”‚                                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚  Email                      â”‚    â”‚
â”‚     â”‚  ________________________   â”‚    â”‚
â”‚     â”‚                             â”‚    â”‚
â”‚     â”‚  Mot de passe               â”‚    â”‚
â”‚     â”‚  ________________________   â”‚    â”‚
â”‚     â”‚                             â”‚    â”‚
â”‚     â”‚      [ Se connecter ]       â”‚    â”‚
â”‚     â”‚                             â”‚    â”‚
â”‚     â”‚  Tentatives restantes: 5    â”‚    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

<h3>7.5.2 Planning (vue joueur)</h3>

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Accueil | ğŸ“… Planning | âš½ Matchs   â”‚
â”‚  ğŸ“Š RÃ©sultats | ğŸ‘¤ Profil               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  PLANNING NOVEMBRE 2025                 â”‚
â”‚                                         â”‚
â”‚  [<]  NOVEMBRE 2025  [>]                â”‚
â”‚                                         â”‚
â”‚  L  M  M  J  V  S  D                    â”‚
â”‚              1  2  3                    â”‚
â”‚  4  5  6  7  8 [9] 10                   â”‚
â”‚  11 12 13 14 â—15 16 17                  â”‚
â”‚  18 19 20 â—22 23 24                     â”‚
â”‚  25 26 27 28 29 30                      â”‚
â”‚                                         â”‚
â”‚  â— = Ã‰vÃ©nements planifiÃ©s               â”‚
â”‚                                         â”‚
â”‚  DÃ‰TAILS DU 15 NOVEMBRE                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 19:30 - Piste 1                   â”‚ â”‚
â”‚  â”‚ Tech Corp vs Innov Ltd            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

<h3>7.5.3 Administration</h3>

<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMINISTRATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [Joueurs] [Ã‰quipes] [Poules] [Comptes]â”‚
â”‚                                         â”‚
â”‚  GESTION DES JOUEURS                    â”‚
â”‚                                         â”‚
â”‚  [+ Nouveau joueur]        ğŸ” Recherche â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Nom      PrÃ©nom   Entreprise  ğŸ“ ğŸ—‘ â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ Dupont   Jean     Tech Corp   âœï¸ âŒ â”‚â”‚
â”‚  â”‚ Martin   Alice    Innov Ltd   âœï¸ âŒ â”‚â”‚
â”‚  â”‚ Durand   Bob      StartCo     âœï¸ âŒ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  Total: 3 joueurs                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>

<h2>7.6 RÃ¨gles mÃ©tier rÃ©capitulatives</h2>

<table>
<tr>
    <th>EntitÃ©</th>
    <th>RÃ¨gle</th>
</tr>
<tr>
    <td>Joueur</td>
    <td>Tous les champs obligatoires doivent Ãªtre renseignÃ©s</td>
</tr>
<tr>
    <td>Joueur</td>
    <td>NumÃ©ro de licence unique au format LXXXXXX</td>
</tr>
<tr>
    <td>Joueur</td>
    <td>Email unique</td>
</tr>
<tr>
    <td>Joueur</td>
    <td>Suppression impossible si dans une Ã©quipe</td>
</tr>
<tr>
    <td>Ã‰quipe</td>
    <td>Les 2 joueurs doivent Ãªtre de la mÃªme entreprise</td>
</tr>
<tr>
    <td>Ã‰quipe</td>
    <td>Un joueur ne peut Ãªtre que dans une Ã©quipe par saison</td>
</tr>
<tr>
    <td>Ã‰quipe</td>
    <td>Modification/suppression impossible si matchs jouÃ©s</td>
</tr>
<tr>
    <td>Poule</td>
    <td>Exactement 6 Ã©quipes obligatoires</td>
</tr>
<tr>
    <td>Poule</td>
    <td>Nom unique</td>
</tr>
<tr>
    <td>Ã‰vÃ©nement</td>
    <td>Date >= aujourd'hui</td>
</tr>
<tr>
    <td>Ã‰vÃ©nement</td>
    <td>1 Ã  3 matchs par Ã©vÃ©nement</td>
</tr>
<tr>
    <td>Ã‰vÃ©nement</td>
    <td>Suppression impossible si matchs terminÃ©s</td>
</tr>
<tr>
    <td>Match</td>
    <td>Une piste ne peut accueillir qu'un match par crÃ©neau</td>
</tr>
<tr>
    <td>Match</td>
    <td>Une Ã©quipe ne peut jouer qu'un match par Ã©vÃ©nement</td>
</tr>
<tr>
    <td>Match</td>
    <td>Suppression uniquement si statut A_VENIR</td>
</tr>
<tr>
    <td>Score</td>
    <td>Format "X-Y, X-Y" ou "X-Y, X-Y, X-Y"</td>
</tr>
<tr>
    <td>Classement</td>
    <td>Victoire = 3 points, DÃ©faite = 0 point</td>
</tr>
<tr>
    <td>Login</td>
    <td>Blocage 30 min aprÃ¨s 5 tentatives Ã©chouÃ©es</td>
</tr>
<tr>
    <td>Mot de passe</td>
    <td>Min 12 caractÃ¨res, maj, min, chiffre, spÃ©cial</td>
</tr>
</table>
<pre>
    # Application Corpo Padel
    
    ## Description
    Application de gestion de tournois corporatifs de padel.
    
    ## PrÃ©requis
    - Python 3.11+
    - Node.js 18+
    - SQLite 3
    
    ## Installation
    
    ### Backend
    ```bash
    cd backend
    python -m venv venv
    
    # Linux/Mac
    source venv/bin/activate
    
    # Windows
    venv\Scripts\activate
    
    pip install -r requirements.txt
    ```
    
    ### Frontend
    ```bash
    cd frontend
    npm install
    ```
    
    ## Configuration
    
    ### Backend
    CrÃ©er un fichier `.env` dans le dossier backend :
    ```
    DATABASE_URL=sqlite:///./padel_corpo.db
    SECRET_KEY=votre-cle-secrete-ici
    ```
    
    ### Frontend
    CrÃ©er un fichier `.env` dans le dossier frontend :
    ```
    VITE_API_BASE_URL=http://localhost:8000/api/v1
    ```
    
    ## Lancement
    
    ### Backend
    ```bash
    cd backend
    uvicorn app.main:app --reload --port 8000
    ```
    
    Le backend sera accessible sur http://localhost:8000
    
    ### Frontend
    ```bash
    cd frontend
    npm run dev
    ```
    
    Le frontend sera accessible sur http://localhost:5173
    
    ## Comptes de test
    
    ### Administrateur
    - Email: admin@padel.com
    - Mot de passe: Admin@2025!
    
    ### Joueur
    - Email: joueur@padel.com
    - Mot de passe: Joueur@2025!
    
    ## Tests
    
    ### Tests unitaires backend
    ```bash
    cd backend
    pytest
    pytest --cov=app --cov-report=html
    ```
    
    ### Tests E2E
    ```bash
    cd frontend
    npx cypress open
    ```
    
    ## Structure du projet
    
    ```
    .
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ app/
    â”‚   â”‚   â”œâ”€â”€ api/          # Routes API
    â”‚   â”‚   â”œâ”€â”€ models/       # ModÃ¨les SQLAlchemy
    â”‚   â”‚   â”œâ”€â”€ schemas/      # SchÃ©mas Pydantic
    â”‚   â”‚   â”œâ”€â”€ services/     # Logique mÃ©tier
    â”‚   â”‚   â””â”€â”€ main.py       # Point d'entrÃ©e
    â”‚   â””â”€â”€ tests/
    â”œâ”€â”€ frontend/
    â”‚   â”œâ”€â”€ src/
    â”‚   â”‚   â”œâ”€â”€ components/   # Composants Vue
    â”‚   â”‚   â”œâ”€â”€ views/        # Pages
    â”‚   â”‚   â”œâ”€â”€ router/       # Configuration routing
    â”‚   â”‚   â””â”€â”€ App.vue
    â”‚   â””â”€â”€ cypress/
    â””â”€â”€ README.md
    ```
    
    ## FonctionnalitÃ©s implÃ©mentÃ©es
    
    - âœ… Authentification JWT avec anti-brute force
    - âœ… Gestion des joueurs, Ã©quipes, poules
    - âœ… Planning et matchs
    - âœ… RÃ©sultats et classements
    - âœ… Administration
    - âœ… Profils utilisateurs
    
    ## SÃ©curitÃ©
    
    - Hashing des mots de passe avec bcrypt
    - Protection anti-brute force (5 tentatives max)
    - Validation des entrÃ©es (Pydantic + frontend)
    - Protection XSS
    - Utilisation exclusive de l'ORM (pas de SQL brut)
    - Headers de sÃ©curitÃ©
    
    ## Auteurs
    [Vos noms]
    
    ## Licence
    Projet pÃ©dagogique - Formation IngÃ©nieur
    ```
    </pre>
    
    <h2>7.9 Checklist avant rendu</h2>
    
    <div class="success-box">
    <strong>VÃ©rifiez ces points avant de rendre votre projet :</strong>
    </div>
    
    <pre>
    â–¡ L'application dÃ©marre correctement en suivant le README
    â–¡ Tous les comptes de test fonctionnent
    â–¡ Le mÃ©canisme anti-brute force est opÃ©rationnel
    â–¡ Les mots de passe sont hashÃ©s dans la base
    â–¡ Toutes les validations sont en place
    â–¡ Les tests unitaires passent (couverture >= 70%)
    â–¡ Les tests E2E passent
    â–¡ Le rapport PDF est complet (10-15 pages)
    â–¡ Le code est commentÃ© et propre
    â–¡ Les fichiers .env ne contiennent pas de vraies valeurs sensibles
    â–¡ Le fichier .gitignore exclut venv/, node_modules/, .env
    â–¡ Les requirements.txt et package.json sont Ã  jour
    â–¡ Aucune erreur console dans le frontend
    â–¡ Aucune erreur dans les logs backend
    â–¡ Les messages d'erreur sont clairs pour l'utilisateur
    â–¡ La navigation entre les pages fonctionne
    â–¡ Les rÃ´les sont correctement vÃ©rifiÃ©s
    â–¡ Les routes protÃ©gÃ©es ne sont pas accessibles sans auth
    â–¡ Le classement se calcule correctement
    â–¡ Les filtres de matchs fonctionnent
    â–¡ Les formulaires ont une validation temps rÃ©el
    </pre>
    
    <h2>7.10 Calendrier suggÃ©rÃ© (12h)</h2>
    
    <table>
        <tr>
            <th>Heure</th>
            <th>TÃ¢che</th>
        </tr>
        <tr>
            <td>H0-H1</td>
            <td>Prise en main du kit de dÃ©marrage, comprÃ©hension du CDC</td>
        </tr>
        <tr>
            <td>H1-H3</td>
            <td>ModÃ¨le de donnÃ©es + API joueurs/Ã©quipes/poules</td>
        </tr>
        <tr>
            <td>H3-H5</td>
            <td>API Ã©vÃ©nements/matchs + Frontend (composants de base)</td>
        </tr>
        <tr>
            <td>H5-H7</td>
            <td>Pages Planning, Matchs, RÃ©sultats (frontend + backend)</td>
        </tr>
        <tr>
            <td>H7-H8</td>
            <td>Page Administration + Gestion des comptes</td>
        </tr>
        <tr>
            <td>H8-H9</td>
            <td>Profil utilisateur + Upload photo</td>
        </tr>
        <tr>
            <td>H9-H10</td>
            <td>Tests unitaires (backend) + Tests E2E</td>
        </tr>
        <tr>
            <td>H10-H11</td>
            <td>Corrections bugs, amÃ©liorations sÃ©curitÃ©, tests complÃ©mentaires</td>
        </tr>
        <tr>
            <td>H11-H12</td>
            <td>RÃ©daction du rapport technique</td>
        </tr>
    </table>
    
    <div class="warning-box">
    <strong>Conseil :</strong> Faites des commits rÃ©guliers pour ne pas perdre votre travail. Testez au fur et Ã  mesure plutÃ´t que tout Ã  la fin.
    </div>
    
    ---
    
    <div style="text-align: center; margin-top: 50px; padding: 30px; background-color: #f8fafc; border-radius: 10px;">
        <h2 style="color: #1e40af;">Bon courage !</h2>
        <p style="font-size: 14px; color: #94a3b8;">N'hÃ©sitez pas Ã  consulter la documentation officielle des frameworks utilisÃ©s.</p>
        <p style="margin-top: 30px; font-size: 12px; color: #cbd5e1;">
            <strong>Version 1.0</strong> - Octobre 2025<br>
            Cahier des charges - Projet pÃ©dagogique Test & SÃ©curitÃ©
        </p>
    </div>
    
    <script>
    // Fonction pour gÃ©nÃ©rer un PDF (pour impression ou export)
    window.onload = function() {
        // Pas de script nÃ©cessaire pour la version print
        console.log("Cahier des charges chargÃ©. Utilisez Ctrl+P pour imprimer ou sauvegarder en PDF.");
    };
    </script>

        <!-- STARTER KIT PAGE -->
        <div id="starter" class="page starter-kit">
            <h1>ğŸ’» Starter Kit - Corpo Padel</h1>
            
            <p style="font-size: 1.2rem; color: #64748b; margin-bottom: 2rem;">
                Kit de dÃ©marrage prÃªt Ã  l'emploi pour votre projet pÃ©dagogique
            </p>

            <h2>ğŸ“¦ Contenu du Kit</h2>
            
            <h3>Backend (FastAPI)</h3>
            <pre>
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth.py          <span class="badge">âœ…</span> Routes d'authentification
â”‚   â”‚   â””â”€â”€ deps.py          <span class="badge">âœ…</span> DÃ©pendances (get_current_user)
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py        <span class="badge">âœ…</span> Configuration
â”‚   â”‚   â””â”€â”€ security.py      <span class="badge">âœ…</span> JWT + hashing
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ models.py        <span class="badge">âœ…</span> User + LoginAttempt
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ auth.py          <span class="badge">âœ…</span> SchÃ©mas Pydantic
â”‚   â”œâ”€â”€ database.py          <span class="badge">âœ…</span> Configuration SQLAlchemy
â”‚   â””â”€â”€ main.py              <span class="badge">âœ…</span> Application FastAPI
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ conftest.py          <span class="badge">âœ…</span> Fixtures
â”‚   â”œâ”€â”€ test_auth.py         <span class="badge">âœ…</span> Tests authentification
â”‚   â”œâ”€â”€ test_security.py     <span class="badge">âœ…</span> Tests sÃ©curitÃ©
â”‚   â””â”€â”€ test_validation.py   <span class="badge">âœ…</span> Tests validation
â”œâ”€â”€ .env.example
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
            </pre>

            <h3>Frontend (VueJS)</h3>
            <pre>
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ NavBar.vue       <span class="badge">âœ…</span> Barre de navigation
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js         <span class="badge">âœ…</span> Routing avec guards
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.js           <span class="badge">âœ…</span> Client Axios + intercepteurs
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ auth.js          <span class="badge">âœ…</span> Store Pinia authentification
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ HomePage.vue     <span class="badge">âœ…</span> Page d'accueil
â”‚   â”‚   â””â”€â”€ LoginPage.vue    <span class="badge">âœ…</span> Page de connexion
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.js
â”œâ”€â”€ cypress/
â”‚   â”œâ”€â”€ e2e/
â”‚   â”‚   â”œâ”€â”€ auth.cy.js       <span class="badge">âœ…</span> Tests E2E auth
â”‚   â”‚   â””â”€â”€ navigation.cy.js <span class="badge">âœ…</span> Tests navigation
â”‚   â””â”€â”€ support/
â”‚       â””â”€â”€ commands.js      <span class="badge">âœ…</span> Commandes custom
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â””â”€â”€ README.md
            </pre>

            <h2>ğŸš€ Installation Rapide</h2>

            <h3>1. Cloner le repository</h3>
            <pre>git clone https://github.com/AndreyPividori/PolytechTours-PadelStarterKit.git
cd PolytechTours-PadelStarterKit</pre>

            <h3>2. Installation Backend</h3>
            <pre>cd backend

# CrÃ©er l'environnement virtuel
python -m venv venv

# Activer l'environnement
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# Installer les dÃ©pendances
pip install -r requirements.txt

# Configuration
cp .env.example .env

# GÃ©nÃ©rer une SECRET_KEY
python -c "import secrets; print(secrets.token_urlsafe(32))"
# Copier la clÃ© gÃ©nÃ©rÃ©e dans le fichier .env

# Initialiser la base de donnÃ©es
python -c "from app.database import init_db; init_db()"

# Lancer le serveur
uvicorn app.main:app --reload --port 8000</pre>

            <div style="background: #d1fae5; padding: 1rem; border-radius: 5px; margin: 1rem 0; border-left: 4px solid #10b981;">
                <strong>âœ… Backend prÃªt !</strong><br>
                API : <a href="http://localhost:8000" target="_blank">http://localhost:8000</a><br>
                Documentation : <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a>
            </div>

            <h3>3. Installation Frontend (nouveau terminal)</h3>
            <pre>cd frontend

# Installer les dÃ©pendances
npm install

# Configuration
cp .env.example .env

# Lancer le serveur de dÃ©veloppement
npm run dev</pre>

            <div style="background: #d1fae5; padding: 1rem; border-radius: 5px; margin: 1rem 0; border-left: 4px solid #10b981;">
                <strong>âœ… Frontend prÃªt !</strong><br>
                Application : <a href="http://localhost:5173" target="_blank">http://localhost:5173</a>
            </div>

            <h2>ğŸ” Compte de Test</h2>
            <div style="background: #eff6ff; padding: 1.5rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>Email :</strong> <code>admin@padel.com</code></p>
                <p><strong>Mot de passe :</strong> <code>Admin@2025!</code></p>
                <p style="margin-top: 1rem; color: #64748b; font-size: 0.9rem;">
                    Ce compte administrateur est crÃ©Ã© automatiquement lors de l'initialisation de la base de donnÃ©es.
                </p>
            </div>

            <h2>âœ… FonctionnalitÃ©s ImplÃ©mentÃ©es</h2>
            <ul>
                <li>âœ… <strong>Authentification JWT</strong> : SystÃ¨me complet avec gÃ©nÃ©ration et validation de tokens</li>
                <li>âœ… <strong>Anti-brute force</strong> : Blocage automatique aprÃ¨s 5 tentatives Ã©chouÃ©es pendant 30 minutes</li>
                <li>âœ… <strong>Hashing des mots de passe</strong> : Utilisation de bcrypt pour sÃ©curiser les mots de passe</li>
                <li>âœ… <strong>Page d'accueil</strong> : Interface d'accueil responsive avec message de bienvenue</li>
                <li>âœ… <strong>Page de login</strong> : Formulaire de connexion avec validation et gestion des erreurs</li>
                <li>âœ… <strong>Navigation protÃ©gÃ©e</strong> : Vue Router avec guards pour protÃ©ger les routes</li>
                <li>âœ… <strong>Store d'authentification</strong> : Gestion d'Ã©tat avec Pinia</li>
                <li>âœ… <strong>Client API</strong> : Axios configurÃ© avec intercepteurs pour les tokens</li>
                <li>âœ… <strong>Tests unitaires</strong> : Exemples de tests avec Pytest</li>
                <li>âœ… <strong>Tests E2E</strong> : Exemples de tests avec Cypress</li>
            </ul>

            <h2>ğŸ“ Ã€ DÃ©velopper</h2>
            <p>Les fonctionnalitÃ©s suivantes doivent Ãªtre dÃ©veloppÃ©es selon le cahier des charges :</p>
            <ul>
                <li>ğŸ”² Gestion des joueurs (CRUD complet)</li>
                <li>ğŸ”² Gestion des Ã©quipes (crÃ©ation, modification, suppression)</li>
                <li>ğŸ”² Gestion des poules (6 Ã©quipes par poule)</li>
                <li>ğŸ”² Planning avec calendrier mensuel</li>
                <li>ğŸ”² Gestion des Ã©vÃ©nements (1 Ã  3 matchs par Ã©vÃ©nement)</li>
                <li>ğŸ”² Liste des matchs Ã  venir (30 prochains jours)</li>
                <li>ğŸ”² Saisie et affichage des rÃ©sultats</li>
                <li>ğŸ”² Classement gÃ©nÃ©ral des entreprises</li>
                <li>ğŸ”² Interface d'administration complÃ¨te</li>
                <li>ğŸ”² Profil utilisateur avec upload de photo</li>
                <li>ğŸ”² Tests complets (couverture â‰¥ 70%)</li>
            </ul>

            <h2>ğŸ§ª Lancer les Tests</h2>

            <h3>Tests Backend (Pytest)</h3>
            <pre>cd backend
source venv/bin/activate  # ou venv\Scripts\activate

# Lancer tous les tests
pytest

# Avec couverture de code
pytest --cov=app --cov-report=html

# Ouvrir le rapport de couverture
# Le fichier htmlcov/index.html contient le rapport dÃ©taillÃ©</pre>

            <h3>Tests E2E (Cypress)</h3>
            <pre>cd frontend

# Mode interactif (recommandÃ© pour le dÃ©veloppement)
npx cypress open

# Mode headless (pour CI/CD)
npx cypress run</pre>

            <h2>ğŸ”§ DÃ©pannage</h2>

            <h3>Erreur : "Port 8000 already in use"</h3>
            <pre># Linux/Mac
lsof -ti:8000 | xargs kill -9

# Windows
netstat -ano | findstr :8000
taskkill /PID &lt;PID&gt; /F</pre>

            <h3>Erreur : "Module not found" (Backend)</h3>
            <pre># VÃ©rifier que l'environnement virtuel est activÃ©
# Vous devriez voir (venv) dans votre terminal

pip install -r requirements.txt</pre>

            <h3>Erreur : CORS</h3>
            <p>VÃ©rifiez que <code>ALLOWED_ORIGINS</code> dans <code>backend/.env</code> correspond Ã  l'URL du frontend :</p>
            <pre>ALLOWED_ORIGINS=http://localhost:5173</pre>

            <h3>Erreur : "Cannot find module" (Frontend)</h3>
            <pre>cd frontend
rm -rf node_modules package-lock.json
npm install</pre>

            <h2>ğŸŒ¿ Workflow Git RecommandÃ©</h2>

            <h3>CrÃ©er votre propre repository</h3>
            <pre># AprÃ¨s avoir clonÃ© le starter kit
cd PolytechTours-PadelStarterKit

# Supprimer le remote d'origine
git remote remove origin

# Ajouter votre remote
git remote add origin &lt;url-de-votre-nouveau-repo&gt;

# CrÃ©er une branche develop
git checkout -b develop

# Pousser sur votre repository
git push -u origin main
git push -u origin develop</pre>

            <h3>Workflow de dÃ©veloppement</h3>
            <pre># CrÃ©er une branche pour chaque fonctionnalitÃ©
git checkout develop
git checkout -b feature/gestion-joueurs

# DÃ©velopper, tester, commiter
git add .
git commit -m "feat: ajout CRUD joueurs"

# Pousser la branche
git push origin feature/gestion-joueurs

# Merger dans develop aprÃ¨s validation
git checkout develop
git merge feature/gestion-joueurs</pre>

            <h2>ğŸ“š Structure des Commits</h2>
            <p>Utilisez des messages de commit clairs avec prÃ©fixes :</p>
            <ul>
                <li><code>feat:</code> nouvelle fonctionnalitÃ©</li>
                <li><code>fix:</code> correction de bug</li>
                <li><code>test:</code> ajout/modification de tests</li>
                <li><code>docs:</code> documentation</li>
                <li><code>refactor:</code> refactoring</li>
                <li><code>style:</code> formatage</li>
            </ul>
            <pre>git commit -m "feat: ajout de la gestion des Ã©quipes"
git commit -m "fix: correction bug anti-brute force"
git commit -m "test: ajout tests pour les matchs"</pre>

            <h2>ğŸ† Conseils pour RÃ©ussir</h2>
            <div style="background: #fef3c7; padding: 1.5rem; border-radius: 8px; margin: 2rem 0; border-left: 4px solid #f59e0b;">
                <h3 style="margin-top: 0;">ğŸ’¡ Recommandations importantes</h3>
                <ul>
                    <li><strong>Commencez par le modÃ¨le de donnÃ©es</strong> : CrÃ©ez d'abord toutes les tables nÃ©cessaires</li>
                    <li><strong>DÃ©veloppez par itÃ©ration</strong> : ImplÃ©mentez une fonctionnalitÃ© complÃ¨te (backend + frontend + tests) avant de passer Ã  la suivante</li>
                    <li><strong>Testez continuellement</strong> : Ne laissez pas les tests pour la fin, Ã©crivez-les au fur et Ã  mesure</li>
                    <li><strong>Commits rÃ©guliers</strong> : Faites des commits frÃ©quents avec des messages clairs</li>
                    <li><strong>Lisez la documentation</strong> : FastAPI et Vue ont d'excellentes documentations officielles</li>
                    <li><strong>RÃ©utilisez le code existant</strong> : Le pattern d'authentification peut Ãªtre rÃ©utilisÃ© pour d'autres endpoints</li>
                    <li><strong>Validez partout</strong> : Backend ET frontend pour une meilleure expÃ©rience utilisateur</li>
                </ul>
            </div>

            <h2>ğŸ“ Ressources Utiles</h2>
            <ul>
                <li><strong>Repository GitHub :</strong> <a href="https://github.com/AndreyPividori/PolytechTours-PadelStarterKit" target="_blank">PolytechTours-PadelStarterKit</a></li>
                <li><strong>Documentation FastAPI :</strong> <a href="https://fastapi.tiangolo.com/" target="_blank">https://fastapi.tiangolo.com/</a></li>
                <li><strong>Documentation VueJS 3 :</strong> <a href="https://vuejs.org/" target="_blank">https://vuejs.org/</a></li>
                <li><strong>Documentation SQLAlchemy :</strong> <a href="https://docs.sqlalchemy.org/" target="_blank">https://docs.sqlalchemy.org/</a></li>
                <li><strong>Documentation Pytest :</strong> <a href="https://docs.pytest.org/" target="_blank">https://docs.pytest.org/</a></li>
                <li><strong>Documentation Cypress :</strong> <a href="https://docs.cypress.io/" target="_blank">https://docs.cypress.io/</a></li>
            </ul>

            <div style="background: #d1fae5; padding: 1.5rem; border-radius: 8px; margin: 2rem 0; border-left: 4px solid #10b981; text-align: center;">
                <h3 style="margin-top: 0;">ğŸ‰ Vous Ãªtes prÃªt !</h3>
                <p>Tout le nÃ©cessaire est en place pour commencer votre projet. Bon dÃ©veloppement ! ğŸ¾</p>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p><strong>Corpo Padel</strong> - Projet PÃ©dagogique</p>
        <p>Cours de Test et SÃ©curitÃ© - Formation IngÃ©nieur</p>
        <p style="margin-top: 1rem;">
            <a href="https://github.com/AndreyPividori/PolytechTours-PadelStarterKit" target="_blank">ğŸ“¦ Repository GitHub</a>
        </p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">
            Version 1.0 - Octobre 2025
        </p>
    </footer>

    <script>
        // Navigation entre les pages
        function navigateTo(page) {
            // Masquer toutes les pages
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });

            // Afficher la page sÃ©lectionnÃ©e
            document.getElementById(page).classList.add('active');

            // Mettre Ã  jour les liens actifs
            document.querySelectorAll('.navbar-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === page) {
                    link.classList.add('active');
                }
            });

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Gestion des clics sur les liens de navigation
        document.querySelectorAll('.navbar-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const page = link.dataset.page;
                navigateTo(page);
            });
        });

        // Log pour debug
        console.log('ğŸ“¦ Application Corpo Padel chargÃ©e !');
        console.log('ğŸ”— Repository: https://github.com/AndreyPividori/PolytechTours-PadelStarterKit');
    </script>
</body>
</html>
